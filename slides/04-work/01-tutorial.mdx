import { Card, Code, Img } from '@fusuma/client';

<!-- sectionTitle: Tutorial -->

<!-- note
initと違い､cloneには元になったリポジトリにログがあった場合はそれが引き継がれる
-->

## リポジトリを作成する

リポジトリを作成する方法

<br/>

- 1. `init`: 新たに始める
- 2. `clone`: 既存のリポジトリを複製して始める

---

## リポジトリを作成する

リポジトリを作成する方法

<br/>

- 1. `init`: 新たに始める
- 2. ~~`clone`: 既存のリポジトリを複製して始める~~

<br/>

今回は新しくリポジトリをつくってまっさらな状態から始める

---

## リポジトリを作成する

今回はホームディレクトリに`src`というディレクトリを作って､そこで作業します

```shell
# リポジトリを置くためのディレクトリを作成して移動
$ mkdir ~/src && cd ~/src

# リポジトリを作成して移動
$ git init git-study # git-study という名前のリポジトリ
Initialized empty Git repository in /home/ユーザー名/src/git-study/.git/
$ cd ./git-study
```

---

## 作成したリポジトリの状態を確認する

```shell
# ディレクトのコンテンツを表示するコマンド
$ ls -a
.git # <-- `.git`というディレクトリが新たに作成された
```

---

## 作成したリポジトリの状態を確認する

```shell
# ディレクトのコンテンツを表示するコマンド
$ ls -a
.git # <-- `.git`というディレクトリが新たに作成された
```

<br/>

#### つまり､`.git`ディレクトリがGitの正体

<br/>

`.git`ディレクトリを削除すれば､リポジトリの情報は消える  
バージョンの情報ももちろん`.git`に入っている

---

## 作成したリポジトリの状態を確認する

```shell
# gitの状態を表示するコマンド
$ git status
On branch master

No commits yet

nothing to commit (create/copy files and use "git add" to track)
```

---

## 作成したリポジトリの状態を確認する

```shell
# gitの状態を表示するコマンド
$ git status
On branch master      # <-- On branch master ってなに?

No commits yet        # <-- No commits yet ってなに?

nothing to commit (create/copy files and use "git add" to track)
#           ↑ だから commit ってなに?                         ↑ track って??
```

---

<!-- note
僕自身も英語ができないのに使えるようになった｡
初めてgitを触ったのは高2のときだから大学受験すらしてないし､そもそも学校行ってなかったし｡
ポケモンの名前を覚える感じでいけると思います
ポケモンやったことないけど

一方で､英語の意味が分かると理解が深まるのも事実なので､力が残っている方は英単語の意味まで調べてみるととても良いです
-->

## Gitを使うにはどうやら
## 知らない単語を覚える必要があるらしい

<br/>

- branch
- master
- commit
- track etc...

---

## commit とは

<br/>

`git status`を実行したときに  
2箇所に単語があったらから､なんか重要そう (小並)

---

## commit とは

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-06T15-41-53_UlO4lDkL7QWmOSehOtvwRtBk.jpg?raw=true"/>

---

<!-- note
実際には普通に｢git commit とは｣って普通に検索しても今回のような説明は出てきません｡
git使いたいけど､よく分からない人って結構いるんですよね｡
そういう人から安易にpvを稼ぐ人も残念ながらたくさんいて､僕も初学者のときはそれに騙されてました｡
そのそれっぽい知識のまま働いて何度もやらかしたこともあります｡
だから､今から話す内容は誰でも理解できるけど､何もせずに誰でも理解できる訳じゃないので､その意識だけ持っておいてください｡
-->

## commit とは

<img width="800px" src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-06T15-56-09_27UnLe5xeVM94fPRq12U1VBf.png?raw=true"/>

---

<!-- note
コミットするとはCommitを作成すること
commitのようにアルファベットで表記してあるのはcommitそれ自体を表す名詞
コミットのようにカタカナで表記してあるのは動詞
親は基本的はひとつで､いない場合やふたつの場合もある
皆さん自分の名前や親の名前は覚えてますよね
それと同様にCommitも自分の名前と親の名前を覚えます
皆さんは世界の真実を知っていますか?
多分多くの方は知らないと思うんですけど(知ってたらこっそり教えて下さい)
Commitもgitの全貌は知りません｡
知っているのはたったのこれだけです｡
-->

<Card
  left={
    <img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-06T15-56-09_27UnLe5xeVM94fPRq12U1VBf.png?raw=true"/>
  }
  right={
    <div>
      <h2>Commitが持てる情報</h2>
      <ul>
        <li>commit自身の名前</li>
        <li>コミットされたときのリポジトリの状態 == スナップショット</li>
        <li>親の名前</li>
        <li>コードを書いた人の名前とタイムスタンプ</li>
        <li>コミットした人の名前とタイムスタンプ</li>
        <li>コミットメッセージ</li>
      </ul>
    </div>
  }
/>

---

## Commitを変更するたびに作れば...!

<br/>

その時点でのコードの状態を順番に並べられて...

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T10-43-39_xkEFzIxmVOAqJJka0AyL7E9C.jpeg?raw=true"/>

---

<!-- note
commitが持てる情報が揃えばcommitが作れる

- コードを書いた人の名前とタイムスタンプ
- コミットした人の名前とタイムスタンプ
の2つは基本的に1つにまとめて同じもととしてもらって一旦はokです

スナップショットとは写真をイメージしてもらうとわかりやすいと思いますが､
ある時点の一瞬をパシャって切り取って複製したものです
gitではある時点のソースコードをパシャってとったものです
-->

## Commitをつくる方法

#### 用意するもの

<br/>

- commit自身の名前
- コミットされたときのリポジトリの状態 == スナップショット
- 親の名前
- コードを書いた人の名前とタイムスタンプ
- コミットした人の名前とタイムスタンプ
- コミットメッセージ

---

<!-- note
このうちのほとんどはGitが勝手に用意してくれる
コミットメッセージはコミットするときにつける必要がある
-->

## Commitをつくる方法

#### 用意するもの

<br/>

- ~~commit自身の名前~~
- コミットされたときのリポジトリの**状態** == スナップショット
- ~~親の名前~~
- ~~コードを書いた人の名前とタイムスタンプ~~
- ~~コミットした人の名前とタイムスタンプ~~
- コミットメッセージ

---

## 新しい**状態**を作るために
## リポジトリのデータを変更する

---

## リポジトリのデータを変更する

```shell
# README.mdというファイルを新規作成
$ touch README.md
```

---

## リポジトリの状態を確認する

```shell
$ git status
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)

        README.md

nothing added to commit but untracked files present (use "git add" to track)
```

---

<!-- note
なにか変わったようだ
-->

<Card
  left={
    <>
      <h2>ファイルを作る前</h2>
      <Code language="shell">{`\
$ git status
On branch master
\n
No commits yet
\n
nothing to commit (create/copy files and use "git add" to track)\
  `}</Code>
    </>
  }
  right={
    <>
      <h2>ファイルを編集したあと</h2>
      <Code language="shell">{`\
$ git status
On branch master
\n
No commits yet
\n
Untracked files:
  (use "git add <file>..." to include in what will be committed)
\n
        README.md
\n
nothing added to commit but untracked files present (use "git add" to track)\
  `}</Code>
    </>
  }
/>

---

## リポジトリの状態を確認する

```shell
$ git status
On branch master # <-- ここは変わってない

No commits yet # <-- ここも変わってない

Untracked files: # <-- なんか増えた
  (use "git add <file>..." to include in what will be committed)
#         ↑ "git add <file>..."でコミットされるコンテンツに含めろ

        README.md # README.mdはUntracked filesファイルらしい

nothing added to commit but untracked files present (use "git add" to track)
#                                    "git add" で trackできるらしい ↑
```

---

## Gitを使うために必要そうな知らない単語

<br/>

- branch
- master
- ~~commit~~ : スナップショット
- **track** <--

<br/>

##### Untrackedとかtrackとか書いてあったから次はtrackが重要そう (小並)

---

## track とは

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-06T17-54-37_HnMCamkUgSDi3mhcjdiy3bMW.jpg?raw=true"/>

---

<!-- note
Untracked filesを日本語では未追跡ファイルと言う
Untracked filesはいくら変更しても､どこが変わったのかを覚えててくれない

tracked filesは直近のスナップショットに存在するファイル
今回のREADME.mdはその前の時点で存在していなかったのでUntracked fileとなる
-->

## track とは

- ファイルを追跡すること
- 追跡対象のファイルは変更されたこと記録できる
- 逆に追跡対象外のファイルはいくら変更しても何も保存されない
- 追跡されているファイルを`tracked files`という
  - 直近のスナップショットに存在するファイル
- 追跡されていないファイルを`Untracked files`という
  - README.mdも今は`Untracked files`なので､追跡できないらしい

---

## README.mdをtrackしてもらう

```shell
$ git add README.md
```

---

## リポジトリの状態を確認する

```shell
$ git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

        new file:   README.md

```

---

<!-- note
git add を実行したことでなにかが変わったようだ
目的通りtrackされたのだろうか
-->

<Card
  left={
    <>
      <h2>`git add README.md`実行前</h2>
      <Code language="shell">{`\
$ git status
On branch master
\n
No commits yet
\n
Untracked files:
  (use "git add <file>..." to include in what will be committed)
\n
        README.md
\n
nothing added to commit but untracked files present (use "git add" to track)\
  `}</Code>
    </>
  }
  right={
    <>
      <h2>`git add README.md`実行後</h2>
      <Code language="shell">{`\
$ git status
On branch master
\n
No commits yet
\n
Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
\n
        new file:   README.md
\n
  `}</Code>
    </>
  }
/>

---

## リポジトリの状態を確認する

```shell
$ git status
On branch master # <-- ここは変わってない

No commits yet # <-- ここも変わってない

Changes to be committed: # <-- なんか変わった
  (use "git rm --cached <file>..." to unstage)
#                                       ↑ unstageってなに?
        new file:   README.md # README.mdがコミットされるファイルになったらしい

```

---

<!-- note
stageが何なのかはリストに追加だけしておいて一旦置いておく
-->

## Gitを使うために必要そうな知らない単語

<br/>

- branch
- master
- ~~commit~~ : スナップショット
- ~~track~~ : ファイルを追跡すること
- **stage** <-- new!

---

## README.mdがコミットされるファイルになったらしい

---

## つまり

---

<!-- note
コミットメッセージはコミットするときにCommitに渡すので
つまり､コミットができる
-->

<!-- classes: fullscreen -->

<Img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-06T15-56-09_27UnLe5xeVM94fPRq12U1VBf.png?raw=true">
  <Code language="md">{`\
## Commitをつくる方法
\n
#### 用意するもの
\n
- commit自身の名前
- コミットされたときのリポジトリの状態 == スナップショット
- 親の名前
- コードを書いた人の名前とタイムスタンプ
- コミットした人の名前とタイムスタンプ
- コミットメッセージ
  `}</Code>
</Img>

---

## Commitをつくる

---

## 前に

---

## README.mdのコンテンツを書きたい

<br/>

今はまだ空のファイルをtrackしてもらっただけ

---

## README.mdに本文を追加する

<br/>

それぞれ決めてもらったテキストエディタで`README.md`ファイルを編集する

```shell
# Windowsの場合
$ notepad ./README.md

# macOSの場合
$ open -a TextEdit ./README.md

# Linuxの場合
$ vi ./README.md
```

```md:README.md
# Git study
```

メモ帳とテキストエディットは`Ctrl+s`でファイルの変更を保存できる  
viは`Z, Z`  

```shell
# ファイルのコンテンツを表示するコマンド
$ cat ./README.md
# Git study
```

---


## リポジトリの状態を確認する

```shell
$ git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

        new file:   README.md

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   README.md

```

---

<!-- note
README.mdを編集したことでなにかが変わったようだ
-->

<Card
  left={
    <>
      <h2>README.mdを編集する前</h2>
      <Code language="shell">{`\
$ git status
On branch master
\n
No commits yet
\n
Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
\n
        new file:   README.md
\n
  `}</Code>
    </>
  }
  right={
    <>
      <h2>README.mdを編集した後</h2>
      <Code language="shell">{`\
$ git status
On branch master
\n
No commits yet
\n
Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
\n
        new file:   README.md
\n
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)
\n
        modified:   README.md
\n
  `}</Code>
    </>
  }
/>

---

## リポジトリの状態を確認する

```shell
$ git status
On branch master # <-- ここは変わってない

No commits yet # <-- ここも変わってない

Changes to be committed: # <-- ここも変わってない
  (use "git rm --cached <file>..." to unstage)
#                                       ↑ unstageってなに?
        new file:   README.md
 # ↓ ここが増えた
Changes not staged for commit: # <-- stagedってなに?
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   README.md

```

---

<!-- note
stage､stageって､ファイルを編集したことでいったい何が変わったって言うんだ
-->

## Gitを使うために必要そうな知らない単語

<br/>

- branch
- master
- ~~commit~~ : スナップショット
- ~~track~~ : ファイルを追跡すること
- **stage** <--

<br/>

そろそろ`stage`がなんなのか知りたくなってきた

---

## stageとは

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T15-12-36_pIUoyqMPtjpsSvuzHnWabmio.jpg?raw=true"/>

---

<!-- note
思い出してもらうと､`git add README.md`を実行したときに､README.mdはコミットされるコンテンツになりましたよって言われてた

あれ､`git add`コマンドってtrackしてもらうためにやったのでは...?
-->

## stageとは

<br/>

- いままで｢コミットされるコンテンツ｣と言われていたファイルを`staged file`という
- 逆に｢コミットされるコンテンツに含まれません｣と言われていたファイルを`unstaged file`という
- `unstaged file`を`staged file`にするためには`git add`コマンドを使う

---

<!-- note
覚えられるかって不安にならないで
そのほうが楽だからこうなってるんです
-->

## `git add`コマンドには複数の意味がある

---

<!-- note
突然ですがこの画像を見てください
一体`git add`が何をやっているのかを見ていきましょう

先に言っておくと､いくつもあるバージョン管理システムのなかで､Gitの素晴らしいところの1つは`git add`の仕組みにあります
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T17-08-27_8Hv1gHBjyQEKjzRdbjkgxmll.png?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T17-29-11_9f1RXRqWlDUWVPXlF22hzGwg.png?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T17-54-42_gy4t0R95M0orcCFHWtr8lj2z.png?raw=true"/>

---

<!-- note
まる描いた部分が`git add`によって行うことができる機能

- UntrackedなファイルをStagedにすること
- ModifiedなファイルをStagedにすること

UntrackedとModifiedの共通点は直前のスナップショットと相違点があること
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T17-58-28_rpteOZI81AzGKVip7T2Fp0eX.png?raw=true"/>

---

## `git add`は
## 直前のスナップショットから変更されたファイルをStagedにする
## コマンド

---

<!-- note
`git add`コマンドのもやもやが解消したところで､
stageとはに戻りましょう
-->

## stageとは

<br/>

- いままで｢コミットされるコンテンツ｣と言われていたファイルを`staged file`という
- 逆に｢コミットされるコンテンツに含まれません｣と言われていたファイルを`unstaged file`という
- `unstaged file`を`staged file`にするためには`git add`コマンドを使う
- この操作をステージングするという

---

## コミットの前にファイルをステージングする必要がある

<br/>

- 1. ファイルを編集する
- 2. ファイルをステージングする
- 3. コミットする

---

<!-- note
そのままコミットしてもよくない?
-->

## コミットの前にファイルをステージングする必要がある

<br/>

- 1. ファイルを編集する
- 2. **ファイルをステージングする** <-- これ必要...?
- 3. コミットする

---

<!-- note
これがGitが他の多くのバージョン管理システムより優れていると呼ばれている点の1つ
ステージングできたほうが嬉しいことがある
-->

## ステージングができると何が嬉しいのか

---

#### 開発をしているとき...

<br/>

機能Aと機能Bの実装を任されました  
2つの機能を同時に実装しました  
そしてひとつのCommitにまとめてコミットしました  

---

<!-- note
大変です
-->

#### 機能Bのほうにバグが見つかりました

<br/>

そうだ､Gitのちからを使って機能Bがなかった状態に戻そう!

---

#### 機能Bを消そうとすると､機能Aも一緒に消えてしまう!

---

## ステージングがあれば...

<br/>

- 1. 機能Aと機能Bを実装する
- 2. 機能Aだけステージングして､コミットする
- 3. 機能Bだけステージングして､コミットする
- 4. もしも機能AかBのどちらかに問題があっても､片方だけ削除できる

---

## ステージングができると､
## 使いやすいCommitを作ることができるので嬉しい!

---

## リポジトリの状態を確認する

```shell
$ git status
On branch master # <-- ここは変わってない

No commits yet # <-- ここも変わってない

Changes to be committed: # <-- ここも変わってない
  (use "git rm --cached <file>..." to unstage)
#                                       ↑ unstageってなに?
        new file:   README.md
 # ↓ ここが増えた
Changes not staged for commit: # <-- stagedってなに?
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   README.md

```

---

## リポジトリの状態を確認する

```shell
$ git status
On branch master # <-- ここは変わってない

No commits yet # <-- ここも変わってない

Changes to be committed: # <-- ここも変わってない
  (use "git rm --cached <file>..." to unstage)

        new file:   README.md # <--

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   README.md # <-- 同じファイルなのにstagedとunstagedの両方の状態がある

```

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T18-54-39_PU5yrwBGRSEp9yABugNYSMOj.png?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T18-54-47_EeJ5Tk02vPf3EXqRDS2QB37R.png?raw=true"/>

---

<!-- note
スペルミスってる許して
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T18-54-53_FokqgPESN1d5oyceQo0ir8uz.png?raw=true"/>

---

<!-- note
UntrackedとModifiedの共通点は直前のスナップショットと相違点があることと言ったけど
-->

## modifiedとは

- 直前のスナップショットと相違していること

---

## 直前のスナップショットって､直前のコミットのことじゃないの?

---

<!-- note
つまりこういうことですね
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T10-43-39_xkEFzIxmVOAqJJka0AyL7E9C.jpeg?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T19-07-12_SfdB07GF9jWZX5G7wEVIbH1L.png?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T19-07-21_C5DakgbSkEwW55SwQo9flRVg.png?raw=true"/>

---

<!-- note
IndexというのはStageされたものの呼び方です
Stagedなファイルが集まったtreeをIndexと呼んでいます
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T19-20-50_m1rzZQLoSQGrXuwzC3eJQLMT.png?raw=true"/>

---

<!-- note
つまり､ここで､同じファイルに2つの状態があるのは､
-->

## リポジトリの状態を確認する

```shell
$ git status
On branch master # <-- ここは変わってない

No commits yet # <-- ここも変わってない

Changes to be committed: # <-- ここも変わってない
  (use "git rm --cached <file>..." to unstage)

        new file:   README.md # <--

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   README.md # <-- 同じファイルなのにstagedとunstagedの両方の状態がある

```

---

<!-- note
さっきのスペルミスってる画像の通り､
最初のファイル追加はその直前のスナップショット(つまり何もない状態)から見たら新しいファイルが追加されたように見える
次のファイルの編集はその直前のスナップショット(つまり空っぽのファイルが追加された状態)から見たらファイルの内容が変更されたように見える
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T18-54-53_FokqgPESN1d5oyceQo0ir8uz.png?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T19-39-33_naLrZEHD2dhoMI3wuEnvgubs.png?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T19-39-44_9tcujndbCGApd4SI6YpXQOEz.png?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T19-39-51_AxDEnBtnx86iN3nFEl6lwE9X.png?raw=true"/>

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T19-39-59_reury4DYBeRESd2eTNNUXAP1.png?raw=true"/>

---

## `git add`で変更をIndexにコピーしよう

#### Indexと､Working directoryの差分を表示するコマンド
(`q`で元の画面に戻れます)

```shell
$ git diff
diff --git a/README.md b/README.md
index 8b13789..a3e7660 100644
--- a/README.md
+++ b/README.md
@@ -1 +1,2 @@

+# Git study
```

#### 変更をIndexにコピーするコマンド

```shell
$ git add README.md
```

---

<!-- note
最初に初めて`git add`したときと全く同じ出力になりました｡
-->

## リポジトリの状態を確認する

```shell
$ git status
n branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)
        new file:   README.md

```

---

## Commitをつくる

#### Commitをつくることをコミットすると言う

コミットメッセージはコミットするときに指定する

```shell
#     コミットメッセージ ↓
$ git commit -m 'create README.md'
[master (root-commit) 656c859] create README.md
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 README.md
```

---

## 作成したCommitを確認する

```shell
$ git log | cat
commit 656c8598dc4f6af14ec50b8b095add3bfe35c560
Author: anoriqq <shota.yoshikawa@anoriqq.com>
Date:   Thu Feb 6 18:58:33 2020 +0900

    create README.md
```

---

## 作成したCommitを確認する

```shell
$ git log | cat
commit 656c8598dc4f6af14ec50b8b095add3bfe35c560 # <-- commitの名前 hashと呼ばれる
Author: anoriqq <shota.yoshikawa@anoriqq.com>   # <-- コードを書いた人
Date:   Thu Feb 6 18:58:33 2020 +0900           # <-- コードを書いた時刻

    create README.md                            # <-- コミットメッセージ
```

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-06T19-22-02_hBTkgrSVcD9bV5rrdbAobcDk.jpeg?raw=true"/>

---

<!-- note
コミットするファイルはないらしい
絶妙なニュアンスの違いはあるけど
working treeはWorking directoryと同じ意味だと思ってもらってok
-->

## リポジトリの状態を確認する

```shell
$ git status
On branch master
nothing to commit, working tree clean
```

---

## `working tree clean`の意味

<br/>

最新の状態がクリーンで､なにもcommitをつくる材料がない  
つまり､`working tree` == `最新のcommit`  
`working tree`に変更を加えると､`最新のcommit`との差分ができるので､  
新たなcommitが作れるようになる

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T20-19-45_0srrxWrz44JlRcgo98FROpuG.png?raw=true"/>

---

## Gitを使うために必要そうな知らない単語

<br/>

- branch <-- これと
- master <-- これの話
- ~~commit~~ : スナップショット
- ~~track~~ : ファイルを追跡すること
- ~~stage~~ : コミットするための変更を選択すること

---

<!-- note
なんでそんなことする必要があるのかと思うけど､何かの役に立つんでしょうきっと
-->

## branchとは

- commitの名前を入れる名前付きの箱
- 例えば`feature`という名前のbranchを作ってここに  
`commit-A`という名前のCommitを入れておくことができる

---

## masterとは

- デフォルトで作成されるbranchの名前
- ちなみに今は､`master`という名前のbranchに  
さっき作ったCommitの名前が入っています

---

<!-- note
git statusを実行したときに一番はじめに出力される内容
master branchにいますよという意味
-->

## `On branch master`

--> 今は`master`ブランチにいます

---

## 今は`master`ブランチに**います**

<br/>

いる...とは...?

---

<!-- note
突然ですが､今のこの状況で､次にworking directoryを変更したらどこと比較すると思いますか?
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T20-19-45_0srrxWrz44JlRcgo98FROpuG.png?raw=true"/>

---

<!-- note
Working directoryでなにかを変更した!
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T20-49-06_A00hSKVPYEefDDUeMEWesvjr.png?raw=true"/>

---

<!-- note
Commit Aと全く同じIndexと比較する(Commit Aと比較していると言っても良いでしょう)
じゃあ､更にコミットした場合は?
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T20-49-21_Zya8wEJr0EO4NTTIhfHOHRev.png?raw=true"/>

---

<!-- note
Commit Bと全く同じIndexと比較する(Commit Bと比較していると言っても良いでしょう)
じゃあ､更にコミットした場合は?
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T20-49-40_ogu11vlm0MVFdjpin1vbWXB9.png?raw=true"/>

---

## 比較対象がコミットを重ねるごとに変わる!

<br/>

この比較対象は直前のCommitであり､  
このCommitを現在行っている変更の**親**と呼びます

---

## Gitさんは毎回親を覚えているのがだるいらしい

<br/>

コミットするたびに次の変更の親はこのCommitです!って言ってられない...

---

<!-- note
新たなソリューション!!!
-->

## HEADと呼ばれる親を入れる箱を用意した

<br/>

コミットするたびにHEADに新しい親の名前を入れておこう!

---

## HEADに親が入っている状態を**いる**と表現しています

<br/>

例えば､HEADがCommit-Aなら  
今はCommit-Aに**います**｡と言える｡  

<br/>

次の変更をコミットすると､そのCommitの親はCommit-Aになります  
そして､次はCommit-Bに**いる**状態に切り替わります

---

<!-- note
よくぞ気づきました!
-->

## あれ､今のHEADはCommit-Aじゃなくてmasterブランチだけど...

---

<!-- note
ブランチが何だったのかを確認すると､
-->

## branchとは

- commitの名前を入れる名前付きの箱
- 例えば`feature`という名前のbranchを作ってここに  
`commit-A`という名前のCommitを入れておくことができる

---

<!-- note
これが正しい!
つまり間違ってないですね
次のコミットではmasterの中身のCommitの名前が自動的に進められます
-->

## 今のHEADはCommit-Aじゃなくて､
## Commit-Aを表しているmasterブランチ

---

## わざわざ2重に箱詰めする必要性

<br/>

重要なのは､自動的にコミットを  
進めてくれる箱に名前がつけられること  

<br/>

(HEADには別の名前を**たくさん**つけられない)

---

## ブランチは無制限に作れる

<br/>

さらに､すべてのブランチに別々のCommitを入れることができて､  
さらにそれぞれを親としてcommitすると､自動的に進んでくれる｡

---

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T21-27-02_FKj48BX2xaHZXNUWjCtJ3Rst.png?raw=true"/>

---

<!-- note
ここからはただの使い方なので､内容がうっっすくなります｡
ここまでの内容が理解できていればあとはそれぞれググればなんでも分かります｡
ので一緒に手を動かさなくてもokです｡
-->

# 並列開発ができる!!!

---

## 早速新しいブランチを作る

```shell
# testingという名前の新しくブランチをつくるコマンド
$ git bransh testing

# ブランチの一覧を表示するコマンド
$ git branch -a
  testing
* master
```

---

## HEADを`testing`に変更する

<br/>

今いるのは`master`なので､`testing`に変更する必要がある

```shell
$ git checkout testing
Switched to branch 'testing'
```

---

<!-- note
新しいブランチなのに､READMEがあることが分かります
-->

## ディレクトリ構成を確認する

```shell
$ ls -a
.  ..  .git  README.md
```

README.mdがある

---

## 実は今､`master`と`testing`は同じCommitの名前を指している

<br/>

`git branch <新しいブランチ名>`というコマンドは､  
現在のHEADが指すCommitで新しい名前のブランチを作成するコマンド

---

<!-- note
まあよく考えたら､並行して作業するなら､まっさらな状態から始めるよりも､途中から始めたほうが良いですよね｡
(もちろんまっさらな状態のブランチも作れます)
-->

<!-- classes: fullscreen -->

<img src="https://github.com/anoriqq/anoriqq/blob/images/2020-02-21T21-44-33_octXz74gJ7SsN9JQEXsy1xQC.png?raw=true"/>

---

<!-- note
並行して開発していると､こんな状況になります｡(次ページ)
-->

## あとはそれぞれのブランチで並行して作業すればOK

---

## 複数のブランチを1つにまとめたい

---

## 一方のブランチの変更を他方のブランチにまとめるコマンド

```shell
$ git merge <取り込みたいブランチ名>
```
